{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 5692651a68a37c5a8cf4","webpack:///./src/SDK.js","webpack:///./~/babel-regenerator-runtime/runtime.js","webpack:///./src/core/Utils.js","webpack:///./src/core/Externals.js","webpack:///external {\"commonjs\":\"es6-promise\",\"commonjs2\":\"es6-promise\"}","webpack:///external {\"commonjs\":\"fetch-ponyfill\",\"commonjs2\":\"fetch-ponyfill\"}","webpack:///external {\"commonjs\":\"pubnub\",\"commonjs2\":\"pubnub\",\"amd\":\"pubnub\"}","webpack:///./~/querystring/index.js","webpack:///./~/querystring/decode.js","webpack:///./~/querystring/encode.js","webpack:///./src/core/Cache.js","webpack:///./~/events/events.js","webpack:///./src/http/Client.js","webpack:///./src/http/ApiResponse.js","webpack:///./src/mocks/ClientMock.js","webpack:///./src/mocks/Registry.js","webpack:///./src/mocks/Mock.js","webpack:///./src/platform/Platform.js","webpack:///./src/platform/Auth.js","webpack:///./src/core/Constants.js","webpack:///./src/pubnub/PubnubFactory.js","webpack:///./src/pubnub/PubnubMock.js","webpack:///./src/subscription/Subscription.js","webpack:///./src/subscription/CachedSubscription.js"],"names":["Utils","Externals","SDK","server","cachePrefix","appSecret","appKey","appName","appVersion","pubnubFactory","client","redirectUri","fetch","Error","Promise","_cache","localStorage","_client","_platform","cache","version","_pubnubFactory","PUBNUB","platform","createSubscription","createCachedSubscription","cacheKey","handleLoginRedirect","origin","response","window","location","hash","search","opener","postMessage","authResponseProperty","sandbox","production","core","Cache","EventEmitter","http","Client","ApiResponse","Auth","Platform","subscription","Subscription","mocks","Registry","Mock","pubnub","PubnubMockFactory","module","exports","queryStringify","parseQueryString","isFunction","isArray","isObject","isObjectObject","isPlainObject","isNodeJS","isBrowser","delay","parameters","stringify","queryString","parse","obj","Array","o","Object","prototype","toString","call","ctor","prot","constructor","hasOwnProperty","process","timeout","resolve","reject","setTimeout","root","global","Function","fetchParts","Request","Response","Headers","storage","prefix","setPrefix","_storage","_prefix","defaultPrefix","setItem","key","data","_prefixKey","JSON","removeItem","getItem","item","clean","indexOf","findHeaderName","events","beforeRequest","requestSuccess","requestError","sendRequest","request","apiResponse","emit","_loadResponse","_response","_init","ok","makeError","e","originalMessage","message","error","createRequest","init","headers","url","method","toUpperCase","_allowedMethods","credentials","mode","query","_jsonContentType","body","contentTypeHeaderName","_contentType","contentType","undefined","_urlencodedContentType","req","originalBody","name","toLowerCase","keys","reduce","res","responseText","_request","_text","_json","_multipart","_isMultipart","_isJson","text","json","skipOKCheck","status","statusText","error_description","description","multipart","length","boundary","_getContentType","match","parts","split","_boundarySeparator","trim","shift","pop","statusInfo","create","map","part","i","_isContentType","get","_multipartContentType","_isUrlEncoded","replace","headersAndBody","_bodySeparator","headersText","join","forEach","header","_headerSeparator","value","append","_registry","registry","mock","find","getResponse","_mocks","add","push","clear","test","path","apiCall","authentication","Date","getTime","logout","presenceLoad","id","subscribeGeneric","expiresIn","date","toISOString","subscribeOnPresence","detailed","tokenRefresh","failure","_method","_path","_delay","_status","_statusText","createResponse","str","set","sdkVersion","beforeLogin","loginSuccess","loginError","beforeRefresh","refreshSuccess","refreshError","beforeLogout","logoutSuccess","logoutError","_server","_appKey","_appSecret","_refreshPromise","_auth","_cacheId","_userAgent","_redirectUri","auth","createUrl","options","builtUrl","hasHttp","addServer","_urlPrefix","_apiVersion","addMethod","addToken","accessToken","loginUrl","_authorizeEndpoint","implicit","state","brandId","display","prompt","parseLoginRedirect","getParts","separator","reverse","qs","loginWindow","width","height","property","target","dualScreenLeft","screenLeft","screen","left","dualScreenTop","screenTop","top","innerWidth","document","documentElement","clientWidth","innerHeight","clientHeight","win","open","focus","eventMethod","addEventListener","eventRemoveMethod","messageEvent","eventListener","close","loginOptions","code","access_token","loggedIn","ensureLoggedIn","login","grant_type","username","password","extension","redirect_uri","endpointId","endpoint_id","accessTokenTtl","refreshTokenTtl","_tokenRequest","_tokenEndpoint","setData","_refresh","_refreshDelayMs","refreshToken","refreshTokenValid","expires_in","refresh_token_expires_in","_clearCacheOnRefreshError","refresh","then","catch","_revokeEndpoint","token","inflateRequest","skipAuthCheck","_authHeader","retry","cancelAccessToken","send","post","put","_apiKey","_isAccessTokenValid","accessTokenValid","apiKey","btoa","Buffer","tokenType","cacheId","refresh_token","token_type","newData","expire_time","now","refresh_token_expire_time","authData","forcedTokenType","refreshHandicapMs","forceAuthentication","crypto_obj","PubnubMock","ready","subscribe","on","channel","unsubscribe","removeAllListeners","receiveMessage","msg","notification","removeSuccess","removeError","renewSuccess","renewError","subscribeSuccess","subscribeError","_pubnub","_pubnubLastChannel","_timeout","_subscription","subscribed","deliveryMode","subscriberKey","address","alive","expirationTime","expired","_renewHandicapMs","setSubscription","_clearTimeout","_setSubscription","_subscribeAtPubnub","_setTimeout","register","renew","eventFilters","addEventFilters","setEventFilters","concat","_getFullEventFilters","transportType","reset","remove","delete","resubscribe","filters","event","setInterval","_pollInterval","clearInterval","_decrypt","encryptionKey","decrypt","encryptKey","keyEncoding","keyLength","_notify","ssl","subscribe_key","bind","connect","CachedSubscription","_cacheKey","restore"],"mappings":"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AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd,KAAK;AACL,cAAc;AACd;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,WAAW;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,WAAW;AACX;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAAS;AACT;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iCAAiC,kBAAkB;AACnD;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,iBAAiB;;AAEjB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,wBAAwB,iBAAiB;AACzC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,YAAY;AACZ;AACA;;AAEA;AACA,YAAY;AACZ;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,8CAA8C,QAAQ;AACtD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;;A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A;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,eAAe,SAAS;AACxB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,GAAG;AACH,oBAAoB,SAAS;AAC7B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;;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","file":"ringcentral.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"es6-promise\"), require(\"fetch-ponyfill\"), require(\"pubnub\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([, , \"pubnub\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"SDK\"] = factory(require(\"es6-promise\"), require(\"fetch-ponyfill\"), require(\"pubnub\"));\n\telse\n\t\troot[\"RingCentral\"] = root[\"RingCentral\"] || {}, root[\"RingCentral\"][\"SDK\"] = factory(root[undefined], root[undefined], root[undefined]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_5__, __WEBPACK_EXTERNAL_MODULE_6__, __WEBPACK_EXTERNAL_MODULE_7__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/build/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 5692651a68a37c5a8cf4","import \"babel-regenerator-runtime\";\nimport * as Utils from \"./core/Utils\";\nimport Cache from \"./core/Cache\";\nimport * as Externals from \"./core/Externals\";\nimport EventEmitter from \"events\";\nimport Client from \"./http/Client\";\nimport ApiResponse from \"./http/ApiResponse\";\nimport {default as ClientMock} from \"./mocks/ClientMock\";\nimport Mock from \"./mocks/Mock\";\nimport Registry from \"./mocks/Registry\";\nimport Platform from \"./platform/Platform\";\nimport Auth from \"./platform/Auth\";\nimport PubnubMockFactory from \"./pubnub/PubnubFactory\";\nimport Subscription from \"./subscription/Subscription\";\nimport CachedSubscription from \"./subscription/CachedSubscription\";\nimport constants from \"./core/Constants\";\n\nclass SDK {\n\n    static version = constants.version;\n\n    static server = {\n        sandbox: 'https://platform.devtest.ringcentral.com',\n        production: 'https://platform.ringcentral.com'\n    };\n\n    /**\n     * @namespace RingCentral\n     * @constructor\n     * @param {object} [options]\n     * @param {string} [options.server]\n     * @param {string} [options.cachePrefix]\n     * @param {string} [options.appSecret]\n     * @param {string} [options.appKey]\n     * @param {string} [options.appName]\n     * @param {string} [options.appVersion]\n     * @param {string} [options.pubnubFactory]\n     * @param {string} [options.client]\n     * @param {string} [options.redirectUri]\n     */\n    constructor({server, cachePrefix, appSecret, appKey, appName, appVersion, pubnubFactory, client, redirectUri}) {\n\n        if (!Externals.fetch) {\n            throw new Error('Native Fetch is missing, set RingCentral.SDK.core.Externals.fetch to your favorite alternative');\n        }\n\n        if (!Externals.Promise) {\n            throw new Error('Native Promise is missing, set RingCentral.SDK.core.Externals.Promise to your favorite alternative');\n        }\n\n        this._cache = new Cache(Externals.localStorage, cachePrefix);\n\n        this._client = client || new Client();\n\n        this._platform = new Platform({\n            client: this._client,\n            cache: this._cache,\n            version: SDK.version,\n            server,\n            appKey,\n            appSecret,\n            appName,\n            appVersion,\n            redirectUri\n        });\n\n        this._pubnubFactory = pubnubFactory || Externals.PUBNUB;\n\n    }\n\n    /**\n     * @return {Platform}\n     */\n    platform() {\n        return this._platform;\n    }\n\n    /**\n     * @return {Subscription}\n     */\n    createSubscription() {\n        return new Subscription(this._pubnubFactory, this._platform);\n    }\n\n    /**\n     * @return {CachedSubscription}\n     */\n    createCachedSubscription(cacheKey) {\n        return new CachedSubscription(this._pubnubFactory, this._platform, this._cache, cacheKey);\n    }\n\n    /**\n     * @return {Cache}\n     */\n    cache() {\n        return this._cache;\n    }\n\n    static core = {\n        Cache: Cache,\n        EventEmitter: EventEmitter,\n        Utils: Utils,\n        Externals: Externals\n    };\n\n    static http = {\n        Client: Client,\n        ApiResponse: ApiResponse\n    };\n\n    static platform = {\n        Auth: Auth,\n        Platform: Platform\n    };\n\n    static subscription = {\n        Subscription: Subscription\n    };\n\n    static mocks = {\n        Client: ClientMock,\n        Registry: Registry,\n        Mock: Mock\n    };\n\n    static pubnub = {\n        PubnubMockFactory: PubnubMockFactory\n    };\n\n    static handleLoginRedirect(origin) {\n        var response = window.location.hash ? window.location.hash : window.location.search;\n        window.opener.postMessage({[constants.authResponseProperty]: response}, origin || window.location.origin);\n    }\n\n}\n\nmodule.exports = SDK;\n\n\n// WEBPACK FOOTER //\n// ./src/SDK.js","/**\n * Copyright (c) 2014, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * https://raw.github.com/facebook/regenerator/master/LICENSE file. An\n * additional grant of patent rights can be found in the PATENTS file in\n * the same directory.\n */\n\n!(function(global) {\n  \"use strict\";\n\n  var hasOwn = Object.prototype.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var iteratorSymbol =\n    typeof Symbol === \"function\" && Symbol.iterator || \"@@iterator\";\n\n  var inModule = typeof module === \"object\";\n  var runtime = global.regeneratorRuntime;\n  if (runtime) {\n    if (inModule) {\n      // If regeneratorRuntime is defined globally and we're in a module,\n      // make the exports object identical to regeneratorRuntime.\n      module.exports = runtime;\n    }\n    // Don't bother evaluating the rest of this file if the runtime was\n    // already defined globally.\n    return;\n  }\n\n  // Define the runtime globally (as expected by generated code) as either\n  // module.exports (if we're in a module) or a new, empty object.\n  runtime = global.regeneratorRuntime = inModule ? module.exports : {};\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided, then outerFn.prototype instanceof Generator.\n    var generator = Object.create((outerFn || Generator).prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  runtime.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype;\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  runtime.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  runtime.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `value instanceof AwaitArgument` to determine if the yielded value is\n  // meant to be awaited. Some may consider the name of this method too\n  // cutesy, but they are curmudgeons.\n  runtime.awrap = function(arg) {\n    return new AwaitArgument(arg);\n  };\n\n  function AwaitArgument(arg) {\n    this.arg = arg;\n  }\n\n  function AsyncIterator(generator) {\n    // This invoke function is written in a style that assumes some\n    // calling function (or Promise) will handle exceptions.\n    function invoke(method, arg) {\n      var result = generator[method](arg);\n      var value = result.value;\n      return value instanceof AwaitArgument\n        ? Promise.resolve(value.arg).then(invokeNext, invokeThrow)\n        : Promise.resolve(value).then(function(unwrapped) {\n            // When a yielded Promise is resolved, its final value becomes\n            // the .value of the Promise<{value,done}> result for the\n            // current iteration. If the Promise is rejected, however, the\n            // result for this iteration will be rejected with the same\n            // reason. Note that rejections of yielded Promises are not\n            // thrown back into the generator function, as is the case\n            // when an awaited Promise is rejected. This difference in\n            // behavior between yield and await is important, because it\n            // allows the consumer to decide what to do with the yielded\n            // rejection (swallow it and continue, manually .throw it back\n            // into the generator, abandon iteration, whatever). With\n            // await, by contrast, there is no opportunity to examine the\n            // rejection reason outside the generator function, so the\n            // only option is to throw it from the await expression, and\n            // let the generator function handle the exception.\n            result.value = unwrapped;\n            return result;\n          });\n    }\n\n    if (typeof process === \"object\" && process.domain) {\n      invoke = process.domain.bind(invoke);\n    }\n\n    var invokeNext = invoke.bind(generator, \"next\");\n    var invokeThrow = invoke.bind(generator, \"throw\");\n    var invokeReturn = invoke.bind(generator, \"return\");\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return invoke(method, arg);\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : new Promise(function (resolve) {\n          resolve(callInvokeWithMethodAndArg());\n        });\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  runtime.async = function(innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList)\n    );\n\n    return runtime.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          if (method === \"return\" ||\n              (method === \"throw\" && delegate.iterator[method] === undefined)) {\n            // A return or throw (when the delegate iterator has no throw\n            // method) always terminates the yield* loop.\n            context.delegate = null;\n\n            // If the delegate iterator has a return method, give it a\n            // chance to clean up.\n            var returnMethod = delegate.iterator[\"return\"];\n            if (returnMethod) {\n              var record = tryCatch(returnMethod, delegate.iterator, arg);\n              if (record.type === \"throw\") {\n                // If the return method threw an exception, let that\n                // exception prevail over the original return or throw.\n                method = \"throw\";\n                arg = record.arg;\n                continue;\n              }\n            }\n\n            if (method === \"return\") {\n              // Continue with the outer return, now that the delegate\n              // iterator has been terminated.\n              continue;\n            }\n          }\n\n          var record = tryCatch(\n            delegate.iterator[method],\n            delegate.iterator,\n            arg\n          );\n\n          if (record.type === \"throw\") {\n            context.delegate = null;\n\n            // Like returning generator.throw(uncaught), but without the\n            // overhead of an extra function call.\n            method = \"throw\";\n            arg = record.arg;\n            continue;\n          }\n\n          // Delegate generator ran and handled its own exceptions so\n          // regardless of what the method was, we continue as if it is\n          // \"next\" with an undefined arg.\n          method = \"next\";\n          arg = undefined;\n\n          var info = record.arg;\n          if (info.done) {\n            context[delegate.resultName] = info.value;\n            context.next = delegate.nextLoc;\n          } else {\n            state = GenStateSuspendedYield;\n            return info;\n          }\n\n          context.delegate = null;\n        }\n\n        if (method === \"next\") {\n          context._sent = arg;\n\n          if (state === GenStateSuspendedYield) {\n            context.sent = arg;\n          } else {\n            context.sent = undefined;\n          }\n        } else if (method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw arg;\n          }\n\n          if (context.dispatchException(arg)) {\n            // If the dispatched exception was caught by a catch block,\n            // then let that catch block handle the exception normally.\n            method = \"next\";\n            arg = undefined;\n          }\n\n        } else if (method === \"return\") {\n          context.abrupt(\"return\", arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          var info = {\n            value: record.arg,\n            done: context.done\n          };\n\n          if (record.arg === ContinueSentinel) {\n            if (context.delegate && method === \"next\") {\n              // Deliberately forget the last sent value so that we don't\n              // accidentally pass it on to the delegate.\n              arg = undefined;\n            }\n          } else {\n            return info;\n          }\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(arg) call above.\n          method = \"throw\";\n          arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  runtime.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  runtime.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      this.sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n        return !!caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.next = finallyEntry.finallyLoc;\n      } else {\n        this.complete(record);\n      }\n\n      return ContinueSentinel;\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = record.arg;\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      return ContinueSentinel;\n    }\n  };\n})(\n  // Among the various tricks for obtaining a reference to the global\n  // object, this seems to be the most reliable technique that does not\n  // use indirect eval (which violates Content Security Policy).\n  typeof global === \"object\" ? global :\n  typeof window === \"object\" ? window :\n  typeof self === \"object\" ? self : this\n);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/babel-regenerator-runtime/runtime.js\n// module id = 2\n// module chunks = 0 1","import {Promise} from \"./Externals.js\";\nimport qs from \"querystring\";\n\n/**\n * @param {object} parameters\n * @returns {string}\n */\nexport function queryStringify(parameters) {\n    return qs.stringify(parameters);\n}\n\n/**\n * @param {string} queryString\n * @returns {object}\n */\nexport function parseQueryString(queryString) {\n    return qs.parse(queryString);\n}\n\n/**\n * @param obj\n * @return {boolean}\n */\nexport function isFunction(obj) {\n    return typeof obj === \"function\";\n}\n\n/**\n * @param obj\n * @return {boolean}\n */\nexport function isArray(obj) {\n    return Array.isArray ? Array.isArray(obj) : typeof obj === \"array\";\n}\n\nexport function isObject(o) {\n    return o != null && typeof o === 'object' && !isArray(o);\n}\n\nexport function isObjectObject(o) {\n    return isObject(o) === true && Object.prototype.toString.call(o) === '[object Object]';\n}\n\nexport function isPlainObject(o) {\n    var ctor, prot;\n\n    if (isObjectObject(o) === false) return false;\n\n    // If has modified constructor\n    ctor = o.constructor;\n    if (typeof ctor !== 'function') return false;\n\n    // If has modified prototype\n    prot = ctor.prototype;\n    if (isObjectObject(prot) === false) return false;\n\n    // If constructor does not have an Object-specific method\n    if (prot.hasOwnProperty('isPrototypeOf') === false) {\n        return false;\n    }\n\n    // Most likely a plain Object\n    return true;\n}\n\nexport function isNodeJS() {\n    return (typeof process !== 'undefined');\n}\n\nexport function isBrowser() {\n    return (typeof window !== 'undefined');\n}\n\nexport function delay(timeout) {\n    return new Promise((resolve, reject) => {\n        setTimeout(() => {\n            resolve(null);\n        }, timeout);\n    });\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/Utils.js","import es6Promise from \"es6-promise\";\nimport fetchPonyfill from \"fetch-ponyfill\";\nimport pubnub from \"pubnub\";\n\nvar root = (typeof window !== \"undefined\" && window) ||\n           (typeof global !== \"undefined\" && global) ||\n           Function(\"return this;\")();\n\nvar Promise = (es6Promise && es6Promise.Promise) || root.Promise;\n\nvar fetchParts = fetchPonyfill ? fetchPonyfill({Promise: Promise}) : {};\n\nvar fetch = fetchParts.fetch || root.fetch;\nvar Request = fetchParts.Request || root.Request;\nvar Response = fetchParts.Response || root.Response;\nvar Headers = fetchParts.Headers || root.Headers;\n\nvar PUBNUB = pubnub || root.PUBNUB;\n\nvar localStorage = (typeof root.localStorage !== 'undefined') ? root.localStorage : {};\n\nexport {Promise, fetch, Request, Response, Headers, PUBNUB, localStorage};\n\n\n// WEBPACK FOOTER //\n// ./src/core/Externals.js","module.exports = __WEBPACK_EXTERNAL_MODULE_5__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"commonjs\":\"es6-promise\",\"commonjs2\":\"es6-promise\"}\n// module id = 5\n// module chunks = 0 1","module.exports = __WEBPACK_EXTERNAL_MODULE_6__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"commonjs\":\"fetch-ponyfill\",\"commonjs2\":\"fetch-ponyfill\"}\n// module id = 6\n// module chunks = 0 1","module.exports = __WEBPACK_EXTERNAL_MODULE_7__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"commonjs\":\"pubnub\",\"commonjs2\":\"pubnub\",\"amd\":\"pubnub\"}\n// module id = 7\n// module chunks = 0 1","'use strict';\n\nexports.decode = exports.parse = require('./decode');\nexports.encode = exports.stringify = require('./encode');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/querystring/index.js\n// module id = 8\n// module chunks = 0 1","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n// If obj.hasOwnProperty has been overridden, then calling\n// obj.hasOwnProperty(prop) will break.\n// See: https://github.com/joyent/node/issues/1707\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nmodule.exports = function(qs, sep, eq, options) {\n  sep = sep || '&';\n  eq = eq || '=';\n  var obj = {};\n\n  if (typeof qs !== 'string' || qs.length === 0) {\n    return obj;\n  }\n\n  var regexp = /\\+/g;\n  qs = qs.split(sep);\n\n  var maxKeys = 1000;\n  if (options && typeof options.maxKeys === 'number') {\n    maxKeys = options.maxKeys;\n  }\n\n  var len = qs.length;\n  // maxKeys <= 0 means that we should not limit keys count\n  if (maxKeys > 0 && len > maxKeys) {\n    len = maxKeys;\n  }\n\n  for (var i = 0; i < len; ++i) {\n    var x = qs[i].replace(regexp, '%20'),\n        idx = x.indexOf(eq),\n        kstr, vstr, k, v;\n\n    if (idx >= 0) {\n      kstr = x.substr(0, idx);\n      vstr = x.substr(idx + 1);\n    } else {\n      kstr = x;\n      vstr = '';\n    }\n\n    k = decodeURIComponent(kstr);\n    v = decodeURIComponent(vstr);\n\n    if (!hasOwnProperty(obj, k)) {\n      obj[k] = v;\n    } else if (Array.isArray(obj[k])) {\n      obj[k].push(v);\n    } else {\n      obj[k] = [obj[k], v];\n    }\n  }\n\n  return obj;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/querystring/decode.js\n// module id = 9\n// module chunks = 0 1","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar stringifyPrimitive = function(v) {\n  switch (typeof v) {\n    case 'string':\n      return v;\n\n    case 'boolean':\n      return v ? 'true' : 'false';\n\n    case 'number':\n      return isFinite(v) ? v : '';\n\n    default:\n      return '';\n  }\n};\n\nmodule.exports = function(obj, sep, eq, name) {\n  sep = sep || '&';\n  eq = eq || '=';\n  if (obj === null) {\n    obj = undefined;\n  }\n\n  if (typeof obj === 'object') {\n    return Object.keys(obj).map(function(k) {\n      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n      if (Array.isArray(obj[k])) {\n        return obj[k].map(function(v) {\n          return ks + encodeURIComponent(stringifyPrimitive(v));\n        }).join(sep);\n      } else {\n        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n      }\n    }).join(sep);\n\n  }\n\n  if (!name) return '';\n  return encodeURIComponent(stringifyPrimitive(name)) + eq +\n         encodeURIComponent(stringifyPrimitive(obj));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/querystring/encode.js\n// module id = 10\n// module chunks = 0 1","export default class Cache {\n\n    static defaultPrefix = 'rc-';\n\n    constructor(storage, prefix) {\n        this.setPrefix(prefix);\n        this._storage = storage;\n    }\n\n    setPrefix(prefix) {\n        this._prefix = prefix || Cache.defaultPrefix;\n        return this;\n    }\n\n    setItem(key, data) {\n        this._storage[this._prefixKey(key)] = JSON.stringify(data);\n        return this;\n    }\n\n    removeItem(key) {\n        delete this._storage[this._prefixKey(key)];\n        return this;\n    }\n\n    getItem(key) {\n        var item = this._storage[this._prefixKey(key)];\n        if (!item) return null;\n        return JSON.parse(item);\n    }\n\n    clean() {\n\n        for (var key in this._storage) {\n\n            if (!this._storage.hasOwnProperty(key)) continue;\n\n            if (key.indexOf(this._prefix) === 0) {\n                delete this._storage[key];\n            }\n\n        }\n\n        return this;\n\n    }\n\n    _prefixKey(key) {\n        return this._prefix + key;\n    }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/Cache.js","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/events/events.js\n// module id = 12\n// module chunks = 0 1","import {fetch, Request} from \"../core/Externals\";\nimport {queryStringify, isPlainObject} from \"../core/Utils\";\nimport EventEmitter from \"events\";\nimport ApiResponse from \"./ApiResponse\";\n\nexport default class Client extends EventEmitter {\n\n    static _allowedMethods = ['GET', 'POST', 'PUT', 'DELETE', 'PATCH', 'OPTIONS', 'HEAD'];\n\n    events = {\n        beforeRequest: 'beforeRequest',\n        requestSuccess: 'requestSuccess',\n        requestError: 'requestError'\n    };\n\n    /**\n     * @param {Request} request\n     * @return {Promise<ApiResponse>}\n     */\n    async sendRequest(request) {\n\n        var apiResponse = new ApiResponse(request);\n\n        try {\n\n            //TODO Stop request if listeners return false\n            this.emit(this.events.beforeRequest, apiResponse);\n\n            apiResponse._response = await this._loadResponse(request);\n\n            await apiResponse._init();\n\n            if (!apiResponse.ok()) throw new Error('Response has unsuccessful status');\n\n            this.emit(this.events.requestSuccess, apiResponse);\n\n            return apiResponse;\n\n        } catch (e) {\n\n            if (!e.apiResponse) e = this.makeError(e, apiResponse);\n\n            this.emit(this.events.requestError, e);\n\n            throw e;\n\n        }\n\n    }\n\n    /**\n     * @param {Request} request\n     * @return {Promise<Response>}\n     * @private\n     */\n    async _loadResponse(request) {\n        return await fetch.call(null, request);\n    }\n\n    /**\n     * Wraps the JS Error object with transaction information\n     * @param {Error|IApiError} e\n     * @param {ApiResponse} apiResponse\n     * @return {IApiError}\n     */\n    makeError(e, apiResponse) {\n\n        // Wrap only if regular error\n        if (!e.hasOwnProperty('apiResponse') && !e.hasOwnProperty('originalMessage')) {\n\n            e.apiResponse = apiResponse;\n            e.originalMessage = e.message;\n            e.message = (apiResponse && apiResponse.error(true)) || e.originalMessage;\n\n        }\n\n        return e;\n\n    }\n\n    /**\n     *\n     * @param {object} init\n     * @param {object} [init.url]\n     * @param {object} [init.body]\n     * @param {string} [init.method]\n     * @param {object} [init.query]\n     * @param {object} [init.headers]\n     * @return {Request}\n     */\n    createRequest(init) {\n\n        init = init || {};\n        init.headers = init.headers || {};\n\n        // Sanity checks\n        if (!init.url) throw new Error('Url is not defined');\n        if (!init.method) init.method = 'GET';\n        init.method = init.method.toUpperCase();\n        if (init.method && Client._allowedMethods.indexOf(init.method) < 0) {\n            throw new Error('Method has wrong value: ' + init.method);\n        }\n\n        // Defaults\n        init.credentials = init.credentials || 'include';\n        init.mode = init.mode || 'cors';\n\n        // Append Query String\n        if (init.query) {\n            init.url = init.url + (init.url.indexOf('?') > -1 ? '&' : '?') + queryStringify(init.query);\n        }\n\n        if (!(findHeaderName('Accept', init.headers))) {\n            init.headers['Accept'] = ApiResponse._jsonContentType;\n        }\n\n        // Serialize body\n        if (isPlainObject(init.body) || !init.body) {\n\n            var contentTypeHeaderName = findHeaderName(ApiResponse._contentType, init.headers);\n\n            if (!contentTypeHeaderName) {\n                contentTypeHeaderName = ApiResponse._contentType;\n                init.headers[contentTypeHeaderName] = ApiResponse._jsonContentType;\n            }\n\n            var contentType = init.headers[contentTypeHeaderName];\n\n            // Assign a new encoded body\n            if (contentType.indexOf(ApiResponse._jsonContentType) > -1) {\n                if((init.method === 'GET' || init.method === 'HEAD') && !!init.body) {\n                    // oddly setting body to null still result in TypeError in phantomjs\n                    init.body = undefined;\n                } else {\n                    init.body = JSON.stringify(init.body);\n                }\n\n            } else if (contentType.indexOf(ApiResponse._urlencodedContentType) > -1) {\n                init.body = queryStringify(init.body);\n            }\n\n        }\n\n        // Create a request with encoded body\n        var req = new Request(init.url, init);\n\n        // Keep the original body accessible directly (for mocks)\n        req.originalBody = init.body;\n\n        return req;\n\n    }\n\n}\n\nexport function findHeaderName(name, headers) {\n    name = name.toLowerCase();\n    return Object.keys(headers).reduce(function(res, key) {\n        if (res) return res;\n        if (name == key.toLowerCase()) return key;\n        return res;\n    }, null);\n}\n\n/**\n * @name IApiError\n * @property {string} stack\n * @property {string} originalMessage\n * @property {ApiResponse} apiResponse\n */\n\n\n// WEBPACK FOOTER //\n// ./src/http/Client.js","import {fetch, Request, Response, Headers, Promise} from '../core/Externals';\n\nexport default class ApiResponse {\n\n    static _contentType = 'Content-Type';\n    static _jsonContentType = 'application/json';\n    static _multipartContentType = 'multipart/mixed';\n    static _urlencodedContentType = 'application/x-www-form-urlencoded';\n    static _headerSeparator = ':';\n    static _bodySeparator = '\\n\\n';\n    static _boundarySeparator = '--';\n\n    /**\n     * @param {Request} request\n     * @param {Response} response\n     * @param {string} responseText\n     */\n    constructor(request, response, responseText) {\n\n        /** @type {Request} */\n        this._request = request;\n\n        /** @type {Response} */\n        this._response = response;\n\n        this._text = responseText;\n        this._json = null;\n        this._multipart = [];\n\n    }\n\n    async _init(){\n\n        if (this._isMultipart() || this._isJson()) {\n            this._text = await this.response().text();\n        }\n\n        return this;\n\n    }\n\n    /**\n     * @return {Response}\n     */\n    response() {\n        return this._response;\n    }\n\n    /**\n     * @return {Request}\n     */\n    request() {\n        return this._request;\n    }\n\n    /**\n     * @return {boolean}\n     */\n    ok() {\n        return this._response && this._response.ok;\n    }\n\n    /**\n     * @return {string}\n     */\n    text() {\n        if (!this._isJson() && !this._isMultipart()) throw new Error('Response is not text');\n        return this._text;\n    }\n\n    /**\n     * @return {object}\n     */\n    json() {\n        if (!this._isJson()) throw new Error('Response is not JSON');\n        if (!this._json) {\n            this._json = this._text ? JSON.parse(this._text) : null;\n        }\n        return this._json;\n    }\n\n    /**\n     * @param [skipOKCheck]\n     * @return {string}\n     */\n    error(skipOKCheck) {\n\n        if (this.ok() && !skipOKCheck) return null;\n\n        var message = (this._response && this._response.status ? this._response.status + ' ' : '') +\n                      (this._response && this._response.statusText ? this._response.statusText : '');\n\n        try {\n\n            if (this.json().message) message = this.json().message;\n            if (this.json().error_description) message = this.json().error_description;\n            if (this.json().description) message = this.json().description;\n\n        } catch (e) {}\n\n        return message;\n\n    }\n\n    /**\n     * @return {ApiResponse[]}\n     */\n    multipart() {\n\n        if (!this._isMultipart()) throw new Error('Response is not multipart');\n\n        if (!this._multipart.length) {\n\n            // Step 1. Split multipart response\n\n            var text = this.text();\n\n            if (!text) throw new Error('No response body');\n\n            var boundary = this._getContentType().match(/boundary=([^;]+)/i)[1];\n\n            if (!boundary) throw new Error('Cannot find boundary');\n\n            var parts = text.toString().split(ApiResponse._boundarySeparator + boundary);\n\n            if (parts[0].trim() === '') parts.shift();\n            if (parts[parts.length - 1].trim() == ApiResponse._boundarySeparator) parts.pop();\n\n            if (parts.length < 1) throw new Error('No parts in body');\n\n            // Step 2. Parse status info\n\n            var statusInfo = ApiResponse.create(parts.shift(), this._response.status, this._response.statusText).json();\n\n            // Step 3. Parse all other parts\n\n            this._multipart = parts.map((part, i) => {\n\n                var status = statusInfo.response[i].status;\n\n                return ApiResponse.create(part, status);\n\n            });\n\n        }\n\n        return this._multipart;\n\n    }\n\n    _isContentType(contentType) {\n        return this._getContentType().indexOf(contentType) > -1;\n    }\n\n    _getContentType() {\n        return this._response.headers.get(ApiResponse._contentType) || '';\n    }\n\n    _isMultipart() {\n        return this._isContentType(ApiResponse._multipartContentType);\n    }\n\n    _isUrlEncoded() {\n        return this._isContentType(ApiResponse._urlencodedContentType);\n    }\n\n    _isJson() {\n        return this._isContentType(ApiResponse._jsonContentType);\n    }\n\n    /**\n     * Method is used to create ApiResponse object from string parts of multipart/mixed response\n     * @param {string} [text]\n     * @param {number} [status]\n     * @param {string} [statusText]\n     * @return {ApiResponse}\n     */\n    static create(text, status, statusText) {\n\n        text = text || '';\n        status = status || 200;\n        statusText = statusText || 'OK';\n\n        text = text.replace(/\\r/g, '');\n\n        var headers = new Headers(),\n            headersAndBody = text.split(ApiResponse._bodySeparator),\n            headersText = (headersAndBody.length > 1) ? headersAndBody.shift() : '';\n\n        text = headersAndBody.length > 0 ? headersAndBody.join(ApiResponse._bodySeparator) : null;\n\n        (headersText || '')\n            .split('\\n')\n            .forEach((header) => {\n\n                var split = header.trim().split(ApiResponse._headerSeparator),\n                    key = split.shift().trim(),\n                    value = split.join(ApiResponse._headerSeparator).trim();\n\n                if (key) headers.append(key, value);\n\n            });\n\n        return new ApiResponse(null, new Response(text ? text : undefined, {\n            headers: headers,\n            status: status,\n            statusText: statusText\n        }), text);\n\n    }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/http/ApiResponse.js","import Registry from './Registry';\nimport {default as HttpClient} from '../http/Client';\n\nexport default class Client extends HttpClient {\n\n    constructor() {\n        super();\n        this._registry = new Registry();\n    }\n\n    registry() {\n        return this._registry;\n    }\n\n    async _loadResponse(request) {\n\n        var mock = this._registry.find(request);\n\n        return await mock.getResponse(request);\n\n    }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/mocks/ClientMock.js","import Mock from './Mock';\n\nexport default class Registry {\n\n    constructor() {\n        this._mocks = [];\n    }\n\n    add(mock) {\n        this._mocks.push(mock);\n        return this;\n    }\n\n    clear() {\n        this._mocks = [];\n        return this;\n    }\n\n    find(request) {\n\n        //console.log('Registry is looking for', request);\n\n        var mock = this._mocks.shift();\n\n        if (!mock) throw new Error('No mock in registry for request ' + request.method + ' ' + request.url);\n\n        if (!mock.test(request)) throw new Error('Wrong request ' + request.method + ' ' + request.url +\n                                                 ' for expected mock ' + mock.method() + ' ' + mock.path());\n\n        return mock;\n\n    }\n\n    apiCall(method, path, response, status, statusText, delay) {\n\n        this.add(new Mock(method, path, response, status, statusText, delay));\n\n        return this;\n\n    }\n\n    authentication() {\n\n        this.apiCall('POST', '/restapi/oauth/token', {\n            'access_token': 'ACCESS_TOKEN',\n            'token_type': 'bearer',\n            'expires_in': 3600,\n            'refresh_token': 'REFRESH_TOKEN',\n            'refresh_token_expires_in': 60480,\n            'scope': 'SMS RCM Foo Boo',\n            'expireTime': new Date().getTime() + 3600000\n        });\n\n        return this;\n\n    }\n\n    logout() {\n\n        this.apiCall('POST', '/restapi/oauth/revoke', {});\n\n        return this;\n\n    }\n\n    presenceLoad(id) {\n\n        this.apiCall('GET', '/restapi/v1.0/account/~/extension/' + id + '/presence', {\n            \"uri\": \"https://platform.ringcentral.com/restapi/v1.0/account/123/extension/\" + id + \"/presence\",\n            \"extension\": {\n                \"uri\": \"https://platform.ringcentral.com/restapi/v1.0/account/123/extension/\" + id,\n                \"id\": id,\n                \"extensionNumber\": \"101\"\n            },\n            \"activeCalls\": [],\n            \"presenceStatus\": \"Available\",\n            \"telephonyStatus\": \"Ringing\",\n            \"userStatus\": \"Available\",\n            \"dndStatus\": \"TakeAllCalls\",\n            \"extensionId\": id\n        });\n\n        return this;\n\n    }\n\n    subscribeGeneric(expiresIn) {\n\n        expiresIn = expiresIn || 15 * 60 * 60;\n\n        var date = new Date();\n\n        this.apiCall('POST', '/restapi/v1.0/subscription', {\n            'eventFilters': [\n                '/restapi/v1.0/account/~/extension/~/presence'\n            ],\n            'expirationTime': new Date(date.getTime() + (expiresIn * 1000)).toISOString(),\n            'expiresIn': expiresIn,\n            'deliveryMode': {\n                'transportType': 'PubNub',\n                'encryption': false,\n                'address': '123_foo',\n                'subscriberKey': 'sub-c-foo',\n                'secretKey': 'sec-c-bar'\n            },\n            'id': 'foo-bar-baz',\n            'creationTime': date.toISOString(),\n            'status': 'Active',\n            'uri': 'https://platform.ringcentral.com/restapi/v1.0/subscription/foo-bar-baz'\n        });\n\n        return this;\n\n    }\n\n    subscribeOnPresence(id, detailed) {\n\n        id = id || '1';\n\n        var date = new Date();\n\n        this.apiCall('POST', '/restapi/v1.0/subscription', {\n            'eventFilters': ['/restapi/v1.0/account/~/extension/' + id + '/presence' + (detailed ? '?detailedTelephonyState=true' : '')],\n            'expirationTime': new Date(date.getTime() + (15 * 60 * 60 * 1000)).toISOString(),\n            'deliveryMode': {\n                'transportType': 'PubNub',\n                'encryption': true,\n                'address': '123_foo',\n                'subscriberKey': 'sub-c-foo',\n                'secretKey': 'sec-c-bar',\n                'encryptionAlgorithm': 'AES',\n                'encryptionKey': 'VQwb6EVNcQPBhE/JgFZ2zw=='\n            },\n            'creationTime': date.toISOString(),\n            'id': 'foo-bar-baz',\n            'status': 'Active',\n            'uri': 'https://platform.ringcentral.com/restapi/v1.0/subscription/foo-bar-baz'\n        });\n\n        return this;\n\n    }\n\n    tokenRefresh(failure) {\n\n        if (!failure) {\n\n            this.apiCall('POST', '/restapi/oauth/token', {\n                'access_token': 'ACCESS_TOKEN_FROM_REFRESH',\n                'token_type': 'bearer',\n                'expires_in': 3600,\n                'refresh_token': 'REFRESH_TOKEN_FROM_REFRESH',\n                'refresh_token_expires_in': 60480,\n                'scope': 'SMS RCM Foo Boo'\n            });\n\n        } else {\n\n            this.apiCall('POST', '/restapi/oauth/token', {\n                'message': 'Wrong token',\n                'error_description': 'Wrong token',\n                'description': 'Wrong token'\n            }, 400);\n\n        }\n\n        return this;\n\n    }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/mocks/Registry.js","import {fetch, Request, Response, Headers, Promise} from '../core/Externals';\nimport ApiResponse from '../http/ApiResponse';\nimport {delay} from '../core/Utils';\n\nexport default class Mock {\n\n    constructor(method, path, json, status, statusText, delay) {\n        this._method = method.toUpperCase();\n        this._path = path;\n        this._json = json || {};\n        this._delay = delay || 10;\n        this._status = status || 200;\n        this._statusText = statusText || 'OK';\n    }\n\n    path() {\n        return this._path;\n    }\n\n    method() {\n        return this._method;\n    }\n\n    test(request) {\n\n        return request.url.indexOf(this._path) > -1 &&\n               request.method.toUpperCase() == this._method;\n\n    }\n\n    async getResponse(request) {\n\n        await delay(this._delay);\n\n        return this.createResponse(this._json);\n\n    }\n\n    createResponse(json, init) {\n\n        init = init || {};\n\n        init.status = init.status || this._status;\n        init.statusText = init.statusText || this._statusText;\n\n        var str = JSON.stringify(json),\n            res = new Response(str, init);\n\n        res.headers.set(ApiResponse._contentType, ApiResponse._jsonContentType);\n\n        return res;\n\n    }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/mocks/Mock.js","import {Promise} from \"../core/Externals\";\nimport EventEmitter from \"events\";\nimport Auth from \"./Auth\";\nimport {queryStringify, parseQueryString, isBrowser, delay} from \"../core/Utils\";\nimport constants from \"../core/Constants\";\n\nexport default class Platform extends EventEmitter {\n\n    static _urlPrefix = '/restapi';\n    static _apiVersion = 'v1.0';\n    static _tokenEndpoint = '/restapi/oauth/token';\n    static _revokeEndpoint = '/restapi/oauth/revoke';\n    static _authorizeEndpoint = '/restapi/oauth/authorize';\n    static _refreshDelayMs = 100;\n    static _cacheId = 'platform';\n    static _clearCacheOnRefreshError = false;\n\n    events = {\n        beforeLogin: 'beforeLogin',\n        loginSuccess: 'loginSuccess',\n        loginError: 'loginError',\n        beforeRefresh: 'beforeRefresh',\n        refreshSuccess: 'refreshSuccess',\n        refreshError: 'refreshError',\n        beforeLogout: 'beforeLogout',\n        logoutSuccess: 'logoutSuccess',\n        logoutError: 'logoutError'\n    };\n\n    constructor({client, cache, server, appKey, appSecret, appName, appVersion, sdkVersion, redirectUri}) {\n\n        super();\n\n        this._server = server;\n        this._appKey = appKey;\n        this._appSecret = appSecret;\n\n        /** @type {Cache} */\n        this._cache = cache;\n\n        /** @type {Client} */\n        this._client = client;\n\n        /** @type {Promise<ApiResponse>} */\n        this._refreshPromise = null;\n\n        this._auth = new Auth(this._cache, Platform._cacheId);\n\n        this._userAgent = (appName ? (appName + (appVersion ? '/' + appVersion : '')) + ' ' : '') + 'RCJSSDK/' + sdkVersion;\n\n        this._redirectUri = redirectUri || '';\n\n    }\n\n    /**\n     * @return {Auth}\n     */\n    auth() {\n        return this._auth;\n    }\n\n    /**\n     * @return {Client}\n     */\n    client() {\n        return this._client;\n    }\n\n    /**\n     * @param {string} path\n     * @param {object} [options]\n     * @param {boolean} [options.addServer]\n     * @param {string} [options.addMethod]\n     * @param {boolean} [options.addToken]\n     * @return {string}\n     */\n    createUrl(path, options) {\n\n        path = path || '';\n        options = options || {};\n\n        var builtUrl = '',\n            hasHttp = path.indexOf('http://') != -1 || path.indexOf('https://') != -1;\n\n        if (options.addServer && !hasHttp) builtUrl += this._server;\n\n        if (path.indexOf(Platform._urlPrefix) == -1 && !hasHttp) builtUrl += Platform._urlPrefix + '/' + Platform._apiVersion;\n\n        builtUrl += path;\n\n        if (options.addMethod || options.addToken) builtUrl += (path.indexOf('?') > -1 ? '&' : '?');\n\n        if (options.addMethod) builtUrl += '_method=' + options.addMethod;\n        if (options.addToken) builtUrl += (options.addMethod ? '&' : '') + 'access_token=' + this._auth.accessToken();\n\n        return builtUrl;\n\n    }\n\n    /**\n     * @param {string} options.redirectUri\n     * @param {string} options.state\n     * @param {string} options.brandId\n     * @param {string} options.display\n     * @param {string} options.prompt\n     * @param {boolean} options.implicit\n     * @param {object} [options]\n     * @return {string}\n     */\n    loginUrl(options) {\n\n        options = options || {};\n\n        return this.createUrl(Platform._authorizeEndpoint + '?' + queryStringify({\n                'response_type': options.implicit ? 'token' : 'code',\n                'redirect_uri': options.redirectUri || this._redirectUri,\n                'client_id': this._appKey,\n                'state': options.state || '',\n                'brand_id': options.brandId || '',\n                'display': options.display || '',\n                'prompt': options.prompt || ''\n            }), {addServer: true})\n\n    }\n\n    /**\n     * @param {string} url\n     * @return {Object}\n     */\n    parseLoginRedirect(url) {\n\n        function getParts(url, separator) {\n            return url.split(separator).reverse()[0];\n        }\n\n        var response = (url.indexOf('#') === 0 && getParts(url, '#')) ||\n                       (url.indexOf('?') === 0 && getParts(url, '?')) ||\n                       null;\n\n        if (!response) throw new Error('Unable to parse response');\n\n        var qs = parseQueryString(response);\n\n        if (!qs) throw new Error('Unable to parse response');\n\n        var error = qs.error_description || qs.error;\n\n        if (error) {\n            var e = new Error(error);\n            e.error = qs.error;\n            throw e;\n        }\n\n        return qs;\n\n    }\n\n    /**\n     * Convenience method to handle 3-legged OAuth\n     *\n     * Attention! This is an experimental method and it's signature and behavior may change without notice.\n     *\n     * @experimental\n     * @param {number} [options.width]\n     * @param {number} [options.height]\n     * @param {object} [options.login] additional options for login()\n     * @param {string} [options.origin]\n     * @param {string} [options.property] name of window.postMessage's event data property\n     * @param {string} [options.target] target for window.open()\n     * @param {string} options.url\n     * @return {Promise}\n     */\n    loginWindow(options) {\n\n        return new Promise((resolve, reject) => {\n\n            if (!isBrowser()) throw new Error('This method can be used only in browser');\n\n            if (!options.url) throw new Error('Missing mandatory URL parameter');\n\n            options = options || {};\n            options.url = options.url || 400;\n            options.width = options.width || 400;\n            options.height = options.height || 600;\n            options.origin = options.origin || window.location.origin;\n            options.property = options.property || constants.authResponseProperty;\n            options.target = options.target || '_blank';\n\n            var dualScreenLeft = window.screenLeft != undefined ? window.screenLeft : screen.left;\n            var dualScreenTop = window.screenTop != undefined ? window.screenTop : screen.top;\n\n            var width = window.innerWidth ? window.innerWidth : document.documentElement.clientWidth ? document.documentElement.clientWidth : screen.width;\n            var height = window.innerHeight ? window.innerHeight : document.documentElement.clientHeight ? document.documentElement.clientHeight : screen.height;\n\n            var left = ((width / 2) - (options.width / 2)) + dualScreenLeft;\n            var top = ((height / 2) - (options.height / 2)) + dualScreenTop;\n            var win = window.open(options.url, '_blank', (options.target == '_blank') ? 'scrollbars=yes, status=yes, width=' + options.width + ', height=' + options.height + ', left=' + left + ', top=' + top : '');\n\n            if (window.focus) win.focus();\n\n            var eventMethod = window.addEventListener ? 'addEventListener' : 'attachEvent';\n            var eventRemoveMethod = eventMethod == 'addEventListener' ? 'removeEventListener' : 'detachEvent';\n            var messageEvent = eventMethod == 'addEventListener' ? 'message' : 'onmessage';\n\n            var eventListener = (e) => {\n\n                if (e.origin != options.origin) return;\n                if (!e.data || !e.data[options.property]) return; // keep waiting\n\n                win.close();\n                window[eventRemoveMethod](messageEvent, eventListener);\n\n                try {\n\n                    var loginOptions = this.parseLoginRedirect(e.data[options.property]);\n\n                    if (!loginOptions.code && !loginOptions.access_token) throw new Error('No authorization code or token');\n\n                    resolve(loginOptions);\n\n                } catch (e) {\n                    reject(e);\n                }\n\n            };\n\n            window[eventMethod](messageEvent, eventListener, false);\n\n        });\n\n    }\n\n    /**\n     * @return {Promise<boolean>}\n     */\n    async loggedIn() {\n\n        try {\n            await this.ensureLoggedIn();\n            return true;\n        } catch (e) {\n            return false;\n        }\n\n    }\n\n    /**\n     * @param {string} options.username\n     * @param {string} options.password\n     * @param {string} options.extension\n     * @param {string} options.code\n     * @param {string} options.redirectUri\n     * @param {string} options.endpointId\n     * @param {string} options.remember\n     * @param {string} options.accessTokenTtl\n     * @param {string} options.refreshTokenTtl\n     * @param {string} options.access_token\n     * @returns {Promise<ApiResponse>}\n     */\n    async login(options) {\n\n        try {\n\n            options = options || {};\n\n            this.emit(this.events.beforeLogin);\n\n            var body = {};\n\n            if (!options.code) {\n\n                body.grant_type = 'password';\n                body.username = options.username;\n                body.password = options.password;\n                body.extension = options.extension || '';\n\n            } else if (options.code) {\n\n                body.grant_type = 'authorization_code';\n                body.code = options.code;\n                body.redirect_uri = options.redirectUri || this._redirectUri;\n                //body.client_id = this.getCredentials().key; // not needed\n\n            }\n\n            var apiResponse;\n            var json;\n\n            if (options.access_token) {\n\n                //TODO Potentially make a request to /oauth/tokeninfo\n                json = options;\n\n            } else {\n\n                if (options.endpointId) body.endpoint_id = options.endpointId;\n                if (options.accessTokenTtl) body.accessTokenTtl = options.accessTokenTtl;\n                if (options.refreshTokenTtl) body.refreshTokenTtl = options.refreshTokenTtl;\n\n                apiResponse = await this._tokenRequest(Platform._tokenEndpoint, body);\n                json = apiResponse.json();\n\n            }\n\n            this._auth.setData(json);\n\n            this.emit(this.events.loginSuccess, apiResponse);\n\n            return apiResponse;\n\n        } catch (e) {\n\n            this._cache.clean();\n\n            this.emit(this.events.loginError, e);\n\n            throw e;\n\n        }\n\n    }\n\n    /**\n     * @returns {Promise<ApiResponse>}\n     * @private\n     */\n    async _refresh() {\n\n        try {\n\n            this.emit(this.events.beforeRefresh);\n\n            await delay(Platform._refreshDelayMs);\n\n            // Perform sanity checks\n            if (!this._auth.refreshToken()) throw new Error('Refresh token is missing');\n            if (!this._auth.refreshTokenValid()) throw new Error('Refresh token has expired');\n\n            /** @type {ApiResponse} */\n            var res = await this._tokenRequest(Platform._tokenEndpoint, {\n                    \"grant_type\": \"refresh_token\",\n                    \"refresh_token\": this._auth.refreshToken(),\n                    \"access_token_ttl\": this._auth.data().expires_in + 1,\n                    \"refresh_token_ttl\": this._auth.data().refresh_token_expires_in + 1\n                }),\n                json = res.json();\n\n            if (!json.access_token) {\n                throw this._client.makeError(new Error('Malformed OAuth response'), res);\n            }\n\n            this._auth.setData(json);\n\n            this.emit(this.events.refreshSuccess, res);\n\n            return res;\n\n        } catch (e) {\n\n            e = this._client.makeError(e);\n\n            if (Platform._clearCacheOnRefreshError) {\n                this._cache.clean();\n            }\n\n            this.emit(this.events.refreshError, e);\n\n            throw e;\n\n        }\n\n    }\n\n    /**\n     * @returns {Promise<ApiResponse>}\n     */\n    refresh() {\n\n        if(!this._refreshPromise) {\n            this._refreshPromise = this._refresh()\n                .then(res => {\n                    this._refreshPromise = null;\n                    return res;\n                })\n                .catch(e => {\n                    this._refreshPromise = null;\n                    throw e;\n                });\n        }\n\n        return this._refreshPromise;\n\n    }\n\n    /**\n     * @returns {Promise<ApiResponse>}\n     */\n    async logout() {\n\n        try {\n\n            this.emit(this.events.beforeLogout);\n\n            var res = await this._tokenRequest(Platform._revokeEndpoint, {\n                token: this._auth.accessToken()\n            });\n\n            this._cache.clean();\n\n            this.emit(this.events.logoutSuccess, res);\n\n            return res;\n\n        } catch (e) {\n\n            this.emit(this.events.logoutError, e);\n\n            throw e;\n\n        }\n\n    }\n\n    /**\n     * @param {Request} request\n     * @param {object} [options]\n     * @param {boolean} [options.skipAuthCheck]\n     * @return {Promise<Request>}\n     */\n    async inflateRequest(request, options) {\n\n        options = options || {};\n\n        if (options.skipAuthCheck) return request;\n\n        await this.ensureLoggedIn();\n\n        request.headers.set('X-User-Agent', this._userAgent);\n        request.headers.set('Client-Id', this._appKey);\n        request.headers.set('Authorization', this._authHeader());\n        //request.url = this.createUrl(request.url, {addServer: true}); //FIXME Spec prevents this...\n\n        return request;\n\n    }\n\n    /**\n     * @param {Request} request\n     * @param {object} [options]\n     * @param {boolean} [options.skipAuthCheck]\n     * @return {Promise<ApiResponse>}\n     */\n    async sendRequest(request, options) {\n\n        try {\n\n            request = await this.inflateRequest(request, options);\n\n            return (await this._client.sendRequest(request));\n\n        } catch (e) {\n\n            // Guard is for errors that come from polling\n            if (!e.apiResponse || !e.apiResponse.response() || (e.apiResponse.response().status != 401) || options.retry) throw e;\n\n            this._auth.cancelAccessToken();\n\n            options.retry = true;\n\n            return (await this.sendRequest(request, options));\n\n        }\n\n    }\n\n    /**\n     * General purpose function to send anything to server\n     * @param {string} options.url\n     * @param {object} [options.body]\n     * @param {string} [options.method]\n     * @param {object} [options.query]\n     * @param {object} [options.headers]\n     * @param {boolean} [options.skipAuthCheck]\n     * @return {Promise<ApiResponse>}\n     */\n    async send(options = {}) {\n\n        //FIXME https://github.com/bitinn/node-fetch/issues/43\n        options.url = this.createUrl(options.url, {addServer: true});\n\n        return await this.sendRequest(this._client.createRequest(options), options);\n\n    }\n\n    /**\n     * @param {string} url\n     * @param {object} [query]\n     * @param {object} [options]\n     * @param {object} [options.headers]\n     * @param {boolean} [options.skipAuthCheck]\n     * @return {Promise<ApiResponse>}\n     */\n    async get(url, query, options) {\n        options = options || {};\n        options.method = 'GET';\n        options.url = url;\n        options.query = query;\n        return await this.send(options);\n    }\n\n    /**\n     * @param {string} url\n     * @param {object} body\n     * @param {object} [query]\n     * @param {object} [options]\n     * @param {object} [options.headers]\n     * @param {boolean} [options.skipAuthCheck]\n     * @return {Promise<ApiResponse>}\n     */\n    async post(url, body, query, options) {\n        options = options || {};\n        options.method = 'POST';\n        options.url = url;\n        options.query = query;\n        options.body = body;\n        return await this.send(options);\n    }\n\n    /**\n     * @param {string} url\n     * @param {object} [body]\n     * @param {object} [query]\n     * @param {object} [options]\n     * @param {object} [options.headers]\n     * @param {boolean} [options.skipAuthCheck]\n     * @return {Promise<ApiResponse>}\n     */\n    async put(url, body, query, options) {\n        options = options || {};\n        options.method = 'PUT';\n        options.url = url;\n        options.query = query;\n        options.body = body;\n        return await this.send(options);\n    }\n\n    /**\n     * @param {string} url\n     * @param {string} [query]\n     * @param {object} [options]\n     * @param {object} [options.headers]\n     * @param {boolean} [options.skipAuthCheck]\n     * @return {Promise<ApiResponse>}\n     */\n    async 'delete'(url, query, options) {\n        options = options || {};\n        options.method = 'DELETE';\n        options.url = url;\n        options.query = query;\n        return await this.send(options);\n    }\n\n    async _tokenRequest(path, body) {\n\n        return await this.send({\n            url: path,\n            skipAuthCheck: true,\n            body: body,\n            method: 'POST',\n            headers: {\n                'Authorization': 'Basic ' + this._apiKey(),\n                'Content-Type': 'application/x-www-form-urlencoded'\n            }\n        });\n\n    }\n\n    async ensureLoggedIn() {\n        if (this._isAccessTokenValid()) return null;\n        return await this.refresh();\n    }\n\n    _isAccessTokenValid() {\n        return (this._auth.accessTokenValid());\n    }\n\n    _apiKey() {\n        var apiKey = this._appKey + ':' + this._appSecret;\n        return (typeof btoa == 'function') ? btoa(apiKey) : new Buffer(apiKey).toString('base64');\n    }\n\n    _authHeader() {\n        var token = this._auth.accessToken();\n        return this._auth.tokenType() + (token ? ' ' + token : '');\n    }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/platform/Platform.js","export default class Auth {\n\n    static refreshHandicapMs = 60 * 1000; // 1 minute\n    static forcedTokenType = 'forced';\n\n    constructor(cache, cacheId) {\n\n        /** @type {Cache} */\n        this._cache = cache;\n        this._cacheId = cacheId;\n\n    }\n\n    accessToken() {\n        return this.data().access_token;\n    }\n\n    refreshToken() {\n        return this.data().refresh_token;\n    }\n\n    tokenType() {\n        return this.data().token_type;\n    }\n\n    /**\n     * @return {{token_type: string, access_token: string, expires_in: number, refresh_token: string, refresh_token_expires_in: number}}\n     */\n    data() {\n\n        return this._cache.getItem(this._cacheId) || {\n                token_type: '',\n                access_token: '',\n                expires_in: 0,\n                refresh_token: '',\n                refresh_token_expires_in: 0\n            };\n\n    }\n\n    /**\n     * @param {object} newData\n     * @return {Auth}\n     */\n    setData(newData) {\n\n        newData = newData || {};\n\n        var data = this.data();\n\n        Object.keys(newData).forEach((key) => {\n            data[key] = newData[key];\n        });\n\n        data.expire_time = Date.now() + (data.expires_in * 1000);\n        data.refresh_token_expire_time = Date.now() + (data.refresh_token_expires_in * 1000);\n\n        this._cache.setItem(this._cacheId, data);\n\n        return this;\n\n    }\n\n    /**\n     * Check if there is a valid (not expired) access token\n     * @return {boolean}\n     */\n    accessTokenValid() {\n\n        var authData = this.data();\n        return (authData.token_type === Auth.forcedTokenType || (authData.expire_time - Auth.refreshHandicapMs > Date.now()));\n\n    }\n\n    /**\n     * Check if there is a valid (not expired) access token\n     * @return {boolean}\n     */\n    refreshTokenValid() {\n\n        return (this.data().refresh_token_expire_time > Date.now());\n\n    }\n\n    /**\n     * @return {Auth}\n     */\n    cancelAccessToken() {\n\n        return this.setData({\n            access_token: '',\n            expires_in: 0\n        });\n\n    }\n\n    /**\n     * This method sets a special authentication mode used in Service Web\n     * @return {Auth}\n     */\n    forceAuthentication() {\n\n        this.setData({\n            token_type: Auth.forcedTokenType,\n            access_token: '',\n            expires_in: 0,\n            refresh_token: '',\n            refresh_token_expires_in: 0\n        });\n\n        return this;\n\n    }\n\n}\n\n//export interface IAuthData {\n//    remember?:boolean;\n//    token_type?:string;\n//    access_token?:string;\n//    expires_in?:number; // actually it's string\n//    expire_time?:number;\n//    refresh_token?:string;\n//    refresh_token_expires_in?:number; // actually it's string\n//    refresh_token_expire_time?:number;\n//    scope?:string;\n//}\n\n\n\n// WEBPACK FOOTER //\n// ./src/platform/Auth.js","export default {\n    authResponseProperty: 'RCAuthorizationResponse',\n    version: (typeof VERSION !== 'undefined' ? VERSION : 'x.x.x')\n};\n\n\n// WEBPACK FOOTER //\n// ./src/core/Constants.js","import PubnubMock from './PubnubMock.js';\nimport {PUBNUB} from '../core/Externals';\n\nexport default class PubnubMockFactory {\n\n    constructor() {\n        this.crypto_obj = PUBNUB.crypto_obj;\n    }\n\n    init(options) {\n        return new PubnubMock(options);\n    }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pubnub/PubnubFactory.js","import EventEmitter from \"events\";\nimport {PUBNUB} from \"../core/Externals\";\n\nexport default class PubnubMock extends EventEmitter {\n\n    constructor(options) {\n        super();\n        this.options = options;\n        this.crypto_obj = PUBNUB.crypto_obj;\n    }\n\n    init(options) {\n        this.options = options;\n    }\n\n    ready() {}\n\n    subscribe(options) {\n        this.on('message-' + options.channel, options.message);\n    }\n\n    unsubscribe(options) {\n        this.removeAllListeners('message-' + options.channel);\n    }\n\n    receiveMessage(msg, channel) {\n        this.emit('message-' + channel, msg, 'env', channel);\n    }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pubnub/PubnubMock.js","import EventEmitter from \"events\";\n\nexport default class Subscription extends EventEmitter {\n\n    static _renewHandicapMs = 2 * 60 * 1000;\n    static _pollInterval = 10 * 1000;\n\n    events = {\n        notification: 'notification',\n        removeSuccess: 'removeSuccess',\n        removeError: 'removeError',\n        renewSuccess: 'renewSuccess',\n        renewError: 'renewError',\n        subscribeSuccess: 'subscribeSuccess',\n        subscribeError: 'subscribeError'\n    };\n\n    constructor(pubnubFactory, platform) {\n\n        super();\n\n        this._pubnubFactory = pubnubFactory;\n        this._platform = platform;\n        this._pubnub = null;\n        this._pubnubLastChannel = null;\n        this._timeout = null;\n        this._subscription = null;\n\n    }\n\n    subscribed() {\n\n        var subscription = this.subscription();\n\n        return !!(subscription.id &&\n                  subscription.deliveryMode &&\n                  subscription.deliveryMode.subscriberKey &&\n                  subscription.deliveryMode.address);\n\n    }\n\n    /**\n     * @return {boolean}\n     */\n    alive() {\n        return this.subscribed() && Date.now() < this.expirationTime();\n    }\n\n    /**\n     * @return {boolean}\n     */\n    expired() {\n        if (!this.subscribed()) return true;\n        return !this.subscribed() || Date.now() > this.subscription().expirationTime;\n    }\n\n    expirationTime() {\n        return new Date(this.subscription().expirationTime || 0).getTime() - Subscription._renewHandicapMs;\n    }\n\n    setSubscription(subscription) {\n\n        subscription = subscription || {};\n\n        this._clearTimeout();\n        this._setSubscription(subscription);\n        this._subscribeAtPubnub();\n        this._setTimeout();\n\n        return this;\n\n    }\n\n    subscription() {\n        return this._subscription || {};\n    }\n\n    /**\n     * Creates or updates subscription if there is an active one\n     * @returns {Promise<ApiResponse>}\n     */\n    async register() {\n\n        if (this.alive()) {\n            return await this.renew();\n        } else {\n            return await this.subscribe();\n        }\n\n    }\n\n    eventFilters() {\n        return this.subscription().eventFilters || [];\n    }\n\n    /**\n     * @param {string[]} events\n     * @return {Subscription}\n     */\n    addEventFilters(events) {\n        this.setEventFilters(this.eventFilters().concat(events));\n        return this;\n    }\n\n    /**\n     * @param {string[]} events\n     * @return {Subscription}\n     */\n    setEventFilters(events) {\n        var subscription = this.subscription();\n        subscription.eventFilters = events;\n        this._setSubscription(subscription);\n        return this;\n    }\n\n    /**\n     * @returns {Promise<ApiResponse>}\n     */\n    async subscribe() {\n\n        try {\n\n            this._clearTimeout();\n\n            if (!this.eventFilters().length) throw new Error('Events are undefined');\n\n            var response = await this._platform.post('/subscription', {\n                    eventFilters: this._getFullEventFilters(),\n                    deliveryMode: {\n                        transportType: 'PubNub'\n                    }\n                }),\n                json = response.json();\n\n            this.setSubscription(json)\n                .emit(this.events.subscribeSuccess, response);\n\n            return response;\n\n\n        } catch (e) {\n\n            e = this._platform.client().makeError(e);\n\n            this.reset()\n                .emit(this.events.subscribeError, e);\n\n            throw e;\n\n        }\n\n    }\n\n    /**\n     * @returns {Promise<ApiResponse>}\n     */\n    async renew() {\n\n        try {\n\n            this._clearTimeout();\n\n            if (!this.subscribed()) throw new Error('No subscription');\n\n            if (!this.eventFilters().length) throw new Error('Events are undefined');\n\n            var response = await this._platform.put('/subscription/' + this.subscription().id, {\n                eventFilters: this._getFullEventFilters()\n            });\n\n            var json = response.json();\n\n            this.setSubscription(json)\n                .emit(this.events.renewSuccess, response);\n\n            return response;\n\n        } catch (e) {\n\n            e = this._platform.client().makeError(e);\n\n            this.reset()\n                .emit(this.events.renewError, e);\n\n            throw e;\n\n        }\n\n    }\n\n    /**\n     * @returns {Promise<ApiResponse>}\n     */\n    async remove() {\n\n        try {\n\n            if (!this.subscribed()) throw new Error('No subscription');\n\n            var response = await this._platform.delete('/subscription/' + this.subscription().id);\n\n            this.reset()\n                .emit(this.events.removeSuccess, response);\n\n            return response;\n\n        } catch (e) {\n\n            e = this._platform.client().makeError(e);\n\n            this.emit(this.events.removeError, e);\n\n            throw e;\n\n        }\n\n    }\n\n    /**\n     * @returns {Promise<ApiResponse>}\n     */\n    resubscribe() {\n        var filters = this.eventFilters();\n        return this.reset().setEventFilters(filters).subscribe();\n    }\n\n    /**\n     * Remove subscription and disconnect from PUBNUB\n     * This method resets subscription at client side but backend is not notified\n     */\n    reset() {\n        this._clearTimeout();\n        if (this.subscribed() && this._pubnub) this._pubnub.unsubscribe({channel: this.subscription().deliveryMode.address});\n        this._setSubscription(null);\n        return this;\n    }\n\n    _setSubscription(subscription) {\n        this._subscription = subscription;\n    }\n\n    _getFullEventFilters() {\n\n        return this.eventFilters().map((event) => {\n            return this._platform.createUrl(event);\n        });\n\n    }\n\n    _setTimeout() {\n\n        this._clearTimeout();\n\n        if (!this.alive()) throw new Error('Subscription is not alive');\n\n        this._timeout = setInterval(()=> {\n\n            if (this.alive()) return;\n\n            if (this.expired()) {\n                this.subscribe();\n            } else {\n                this.renew();\n            }\n\n        }, Subscription._pollInterval);\n\n        return this;\n\n    }\n\n    _clearTimeout() {\n        clearInterval(this._timeout);\n        return this;\n    }\n\n    _decrypt(message) {\n\n        if (!this.subscribed()) throw new Error('No subscription');\n\n        if (this.subscription().deliveryMode.encryptionKey) {\n\n            message = this._pubnubFactory.crypto_obj.decrypt(message, this.subscription().deliveryMode.encryptionKey, {\n                encryptKey: false,\n                keyEncoding: 'base64',\n                keyLength: 128,\n                mode: 'ecb'\n            });\n\n        }\n\n        return message;\n\n    }\n\n    _notify(message) {\n        this.emit(this.events.notification, this._decrypt(message));\n        return this;\n    }\n\n    _subscribeAtPubnub() {\n\n        if (!this.alive()) throw new Error('Subscription is not alive');\n\n        var deliveryMode = this.subscription().deliveryMode;\n\n        if (this._pubnub) {\n\n            if (this._pubnubLastChannel == deliveryMode.address) { // Nothing to update, keep listening to same channel\n                return this;\n            } else if (this._pubnubLastChannel) { // Need to subscribe to new channel\n                this._pubnub.unsubscribe({channel: this._pubnubLastChannel});\n            }\n\n            // Re-init for new data\n            this._pubnub = this._pubnub.init({\n                ssl: true,\n                subscribe_key: deliveryMode.subscriberKey\n            });\n\n        } else {\n\n            // Init from scratch\n            this._pubnub = this._pubnubFactory.init({\n                ssl: true,\n                subscribe_key: deliveryMode.subscriberKey\n            });\n\n            this._pubnub.ready(); //TODO This may be not needed anymore\n\n        }\n\n        this._pubnubLastChannel = deliveryMode.address;\n\n        this._pubnub.subscribe({\n            channel: deliveryMode.address,\n            message: this._notify.bind(this),\n            connect: () => {}\n        });\n\n        return this;\n\n    }\n\n}\n\n//export interface ISubscription {\n//    id?:string;\n//    uri?: string;\n//    eventFilters?:string[];\n//    expirationTime?:string; // 2014-03-12T19:54:35.613Z\n//    expiresIn?:number;\n//    deliveryMode?: {\n//        transportType?:string;\n//        encryption?:boolean;\n//        address?:string;\n//        subscriberKey?:string;\n//        encryptionKey?:string;\n//        secretKey?:string;\n//    };\n//    creationTime?:string; // 2014-03-12T19:54:35.613Z\n//    status?:string; // Active\n//}\n\n\n\n// WEBPACK FOOTER //\n// ./src/subscription/Subscription.js","import Subscription from \"./Subscription\";\n\nexport default class CachedSubscription extends Subscription {\n\n    constructor(pubnubFactory, platform, cache, cacheKey) {\n\n        super(pubnubFactory, platform);\n\n        /** @type {Cache} */\n        this._cache = cache;\n        this._cacheKey = cacheKey;\n\n    }\n\n    subscription() {\n        return this._cache.getItem(this._cacheKey) || {};\n    }\n\n    _setSubscription(subscription) {\n        return this._cache.setItem(this._cacheKey, subscription);\n    }\n\n    /**\n     * This function checks whether there are any pre-defined eventFilters in cache and if not -- uses provided as defaults\n     * @param {string[]} events\n     * @return {CachedSubscription}\n     */\n    restore(events) {\n\n        if (!this.eventFilters().length) {\n            this.setEventFilters(events);\n        }\n\n        return this;\n\n    }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/subscription/CachedSubscription.js"],"sourceRoot":""}